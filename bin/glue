#!/usr/bin/env coffee
# TODO: replace with glue for live
{cli, VERSION} = require('../')

util = require 'util'
print = require('sys').print

# Welcome
print "Lets glue some stuff together (glue #{VERSION})\n"
usage = '\nUsage: glue [command]
\n
\nCommands:
\n  create [name]               generate a new app in dir [name]
\n  help                        show this help
\n'

# Argument parsing
# TODO: these offsets aren't nice and our script name is not in argv
command = process.argv[2]
parameters = process.argv[3..]

# Must specify at least a command
if command is undefined or command is 'help'
  print usage
  process.exit(1)

# Invoke the command if it exists
if cli[command]
  if parameters.length is 0
    cli[command]()
  else
    cli[command](parameters...)
else
  cli.error 'Invalid command supplied, try "glue help"'
